/**
 * Customizer Controls Js
 *
 * @package	Nexter
 * @since	1.0.0
 */
!function(a){"use strict";a(window).on("load",function(){a("html").addClass("background-colorpicker-ready")}),wp.customize.controlConstructor["nxt-background"]=wp.customize.Control.extend({ready:function(){var o=this,t=o.setting._value,n=o.container.find(".nxt-color-control");!_.isUndefined(t["bg-image"])&&""!==t["bg-image"]||o.container.find(".nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-attachment").addClass("hidden"),n.wpColorPicker({change:function(){a("html").hasClass("background-colorpicker-ready")&&setTimeout(function(){o.setData("bg-color",n.val())},100)},clear:function(t){a(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0]&&o.setData("bg-color","")}}),o.container.on("change",".nxt-bg-type-list input",function(t){t.preventDefault();t=a(this).val();o.setData("bg-type",t),"color"===t?(o.container.find(".nxt-bg-color").removeClass("hidden"),o.container.find(".nxt-bg-image").addClass("hidden"),o.container.find(".nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-attachment").addClass("hidden")):"image"===t&&(o.container.find(".nxt-bg-image").removeClass("hidden"),o.container.find(".nxt-bg-color").addClass("hidden"),""!==o.setting._value["bg-image"]&&void 0!==o.setting._value["bg-image"]&&o.container.find(".nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-attachment").removeClass("hidden"))}),o.container.on("change",".nxt-bg-position select",function(){o.setData("bg-position",a(this).val())}),o.container.on("change",".nxt-bg-size select",function(){o.setData("bg-size",a(this).val())}),o.container.on("change",".nxt-bg-repeat select",function(){o.setData("bg-repeat",a(this).val())}),o.container.on("change",".nxt-bg-attachment select",function(){o.setData("bg-attachment",a(this).val())}),o.container.on("click",".bg-image-upload-button",function(t){var i=wp.media({multiple:!1}).open().on("select",function(){var t,n=i.state().get("selection").first(),e=n.toJSON().sizes.full.url;_.isUndefined(n.toJSON().sizes.medium)?_.isUndefined(n.toJSON().sizes.thumbnail)||(e=n.toJSON().sizes.thumbnail.url):e=n.toJSON().sizes.medium.url,t=n.toJSON().sizes.full.url,n.toJSON().id,n.toJSON().width,n.toJSON().height,""!==t&&o.container.find(".nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-attachment").removeClass("hidden"),o.setData("bg-image",t),n=o.container.find(".placeholder, .thumbnail"),t=o.container.find(".bg-image-upload-remove-button"),n.length&&n.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+e+'" alt="" />'),t.length&&t.show()});t.preventDefault()}),o.container.on("click",".bg-image-upload-remove-button",function(t){var n;t.preventDefault(),o.setData("bg-image",""),n=o.container.find(".placeholder, .thumbnail"),t=o.container.find(".bg-image-upload-remove-button"),o.container.find(".nxt-control-background > .nxt-bg-repeat,.nxt-control-background > .nxt-bg-position,.nxt-control-background > .nxt-bg-size,.nxt-control-background > .nxt-bg-attachment").addClass("hidden"),n.length&&(n.innerHTML="",n.removeClass().addClass("placeholder").html(nexterControlBg.placeholder)),t.length&&t.hide()})},setData:function(t,n){var e=this,i=a("#customize-control-"+e.id.replace("[","-").replace("]","")+" .background-hidden-val"),o=e.setting._value;o[t]=n,a(i).attr("value",JSON.stringify(o)).trigger("change"),e.setting.set(o)}}),a(window).on("load",function(){a("html").addClass("colorpicker-ready")}),wp.customize.controlConstructor["nxt-color"]=wp.customize.Control.extend({ready:function(){var e=this;this.container.find(".nxt-color-picker-alpha").wpColorPicker({change:function(t,n){t.target;n=n.color.toString();a("html").hasClass("colorpicker-ready")&&e.setting.set(n)},clear:function(t){a(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0]&&e.setting.set("")}})}}),wp.customize.controlConstructor["nxt-multi-checkbox"]=wp.customize.Control.extend({ready:function(){var o=this;o.container.on("change","input",function(){var e=[],i=0;a.each(o.params.choices,function(t,n){o.container.find('input[value="'+t+'"]').is(":checked")&&(e[i]=t,i++)}),o.setting.set(e)})}}),wp.customize.controlConstructor["nxt-responsive"]=wp.customize.Control.extend({ready:function(){var t=this;t.container.find(".nxt-responsive-devices button").on("click",function(t){var n=a(this).attr("data-device");a('.wp-full-overlay-footer .devices button[data-device="'+(n="desktop"==n?"tablet":"tablet"==n?"mobile":"desktop")+'"]').trigger("click")}),this.container.on("change keyup paste",".nxt-responsive-number, .nxt-responsive-unit",function(){a(this).val(),t.setValue()}),this.container.on("blur","input",function(){""==(a(this).val()||"")&&wp.customize.previewer.refresh()})},setValue:function(){var t=this,e={};t.responsiveWrap=t.container.find(".nxt-responsive-control-wrap").first(),t.responsiveWrap.find(".nxt-responsive-number").each(function(){var t=a(this),n=t.data("id"),t=t.val();e[n]=t}),t.responsiveWrap.find(".nxt-responsive-unit").each(function(){var t=a(this),n=t.data("id"),t=t.val();e[n]=t}),t.setting.set(e)}}),wp.customize.controlConstructor["nxt-responsive-slider"]=wp.customize.Control.extend({ready:function(){var n=this;n.container.on("click",".nxt-resp-slider-devices button",function(t){t.preventDefault();t=a(this).attr("data-device");a('.wp-full-overlay-footer .devices button[data-device="'+(t="desktop"==t?"tablet":"tablet"==t?"mobile":"desktop")+'"]').trigger("click")}),this.container.on("input change","input[type=range]",function(){var t=a(this).val(),n=a(this).closest(".nxt-slider-wrap").find(".nxt-responsive-slider-number");n.val(t),n.trigger("change")}),this.container.on("click",".nxt-reset-slider-resp",function(){var t=a(this).parent().find(".nxt-slider-wrap.active"),n=t.find("input[type=range]"),e=t.find(".nxt-responsive-slider-number"),t=n.data("reset");n.val(t),e.val(t),e.trigger("change")}),this.container.on("input change","input[type=number]",function(){var t=a(this).val();a(this).closest(".nxt-slider-wrap").find("input[type=range]").val(t),n.setValue()})},setValue:function(){var e={};this.responsiveContainer=this.container.find(".wrapper").first(),this.responsiveContainer.find(".nxt-responsive-slider-number").each(function(){var t=a(this),n=t.data("id"),t=t.val();e[n]=t}),this.setting.set(e)}}),wp.customize.controlConstructor["nxt-responsive-spacing"]=wp.customize.Control.extend({ready:function(){var t=this;t.nxtResponsiveInit(),this.container.on("change keyup paste","input.nxt-spacing-input",function(){a(this).val(),t.updateValue()})},updateValue:function(){var t=this,e={md:{},sm:{},xs:{},"md-unit":"px","sm-unit":"px","xs-unit":"px"};t.container.find("input.nxt-spacing-desktop").each(function(){var t=a(this),n=t.data("id"),t=t.val();e.md[n]=t}),t.container.find("input.nxt-spacing-tablet").each(function(){var t=a(this),n=t.data("id"),t=t.val();e.sm[n]=t}),t.container.find("input.nxt-spacing-mobile").each(function(){var t=a(this),n=t.data("id"),t=t.val();e.xs[n]=t}),t.container.find(".nxt-spacing-unit-inner .nxt-spacing-unit-hidden").each(function(){var t=a(this),n=t.attr("data-device"),t=t.val();e[n+"-unit"]=t}),t.setting.set(e)},nxtResponsiveInit:function(){var i=this;i.container.find(".nxt-resp-spacing-btns button").on("click",function(t){var n=a(this).attr("data-device");a('.wp-full-overlay-footer .devices button[data-device="'+(n="desktop"==n?"tablet":"tablet"==n?"mobile":"desktop")+'"]').trigger("click")}),i.container.on("click",".nxt-spacing-units-devices .single-unit",function(){var t=a(this);if(t.hasClass("active"))return!1;var n=t.attr("data-unit"),e=a(".wp-full-overlay-footer .devices button.active").attr("data-device");t.siblings().removeClass("active"),t.addClass("active"),i.container.find(".nxt-spacing-unit-inner .nxt-spacing-"+e+"-unit").val(n),i.updateValue()})}}),a(document).ready(function(){a(".nxt-spacing-linked").on("click",function(){a(this).parent().parent(".nxt-spacing-devices").find("input").removeClass("connected").attr("data-element-connect",""),a(this).parent(".nxt-spacing-input-link-unlink").removeClass("disconnected")}),a(".nxt-spacing-unlinked").on("click",function(){var t=a(this).data("element-connect");a(this).parent().parent(".nxt-spacing-devices").find("input").addClass("connected").attr("data-element-connect",t),a(this).parent(".nxt-spacing-input-link-unlink").addClass("disconnected")}),a(".nxt-spacing-input-item").on("input",".connected",function(){var t=a(this).attr("data-element-connect"),e=a(this).val();a(this).parent().parent(".nxt-spacing-devices").find('.connected[ data-element-connect="'+t+'" ]').each(function(t,n){a(this).val(e).change()})})}),wp.customize.controlConstructor["nxt-slider"]=wp.customize.Control.extend({ready:function(){var e=this;e.container.on("input change","input[type=range]",function(){var t=a(this),n=t.val(),t=t.closest(".nxt_slider_wrap").find(".nxt_range_value .value");t.val(n),t.trigger("change")}),a(".nxt-slider-reset").on("click",function(){var t=a(this).closest(".nxt_slider_wrap"),n=t.find("input[type=range]"),e=t.find(".nxt_range_value .value"),t=n.data("reset_value");n.val(t),e.val(t),e.change()}),e.container.on("input change","input[type=number]",function(){var t=a(this),n=t.val();t.closest(".nxt_slider_wrap").find("input[type=range]").val(n),e.setting.set(n)})}}),wp.customize.controlConstructor["nxt-switcher"]=wp.customize.Control.extend({ready:function(){var t=this;this.container.on("click","input.switch-input",function(){t.setting.set(a(this).val())})}}),a(" .wp-full-overlay-footer .devices button ").on("click",function(){var t=a(this).attr("data-device");a(".customize-control-nxt-responsive .nxt-responsive-control-wrap input, .customize-control .nxt-responsive-devices > li").removeClass("active"),a(".customize-control-nxt-responsive .nxt-responsive-control-wrap input."+t+", .customize-control .nxt-responsive-devices > li."+t).addClass("active"),a(".customize-control-nxt-responsive-slider .nxt-slider-wrap, .customize-control .nxt-resp-slider-devices > li").removeClass("active"),a(".customize-control-nxt-responsive-slider .nxt-slider-wrap."+t+", .customize-control .nxt-resp-slider-devices > li."+t).addClass("active"),a(".customize-control-nxt-responsive-spacing .nxt-spacing-inner-wrap .nxt-spacing-devices, .customize-control .nxt-resp-spacing-btns > li").removeClass("active"),a(".customize-control-nxt-responsive-spacing .nxt-spacing-inner-wrap .nxt-spacing-devices."+t+", .customize-control .nxt-resp-spacing-btns > li."+t).addClass("active")})}(jQuery);